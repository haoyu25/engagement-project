<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ­å·ä¸­å¿ƒåŸåŒºå†…æ¶ä¸ŠæŠ¥ç³»ç»Ÿ | Hangzhou Inundation Reporting</title>
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;600;700&family=Source+Sans+3:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <!-- Custom Styles -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="logo">
            <div class="logo-icon">ğŸ’§</div>
            <div class="logo-text">
                æ­å·å†…æ¶ä¸ŠæŠ¥ç³»ç»Ÿ
                <span>Inundation Reporting</span>
            </div>
        </div>
        <div class="header-stats">
            <div class="stat-item">
                <div class="stat-value" id="totalReports">0</div>
                <div class="stat-label">ä¸ŠæŠ¥æ€»æ•° / Reports</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="todayReports">0</div>
                <div class="stat-label">ä»Šæ—¥ / Today</div>
            </div>
        </div>
    </header>
    
    <!-- Main Container -->
    <div class="main-container">
        <!-- Map -->
        <div id="map"></div>
        
        <!-- Layer Controls -->
        <div class="layer-controls">
            <div class="layer-title">å›¾å±‚ / Layers</div>
            <div class="layer-item active" data-layer="roads">
                <div class="layer-checkbox"></div>
                <div class="layer-color" style="background: #666"></div>
                <div class="layer-name">é“è·¯ Roads</div>
            </div>
            <div class="layer-item active" data-layer="water">
                <div class="layer-checkbox"></div>
                <div class="layer-color" style="background: #3498DB"></div>
                <div class="layer-name">æ°´ä½“ Water</div>
            </div>
            <div class="layer-item active" data-layer="parks">
                <div class="layer-checkbox"></div>
                <div class="layer-color" style="background: #27AE60"></div>
                <div class="layer-name">ç»¿åœ° Parks</div>
            </div>
            <div class="layer-item active" data-layer="amenities">
                <div class="layer-checkbox"></div>
                <div class="layer-color" style="background: #E67E22"></div>
                <div class="layer-name">è®¾æ–½ Amenities</div>
            </div>
            <div class="layer-item active" data-layer="metro">
                <div class="layer-checkbox"></div>
                <div class="layer-color" style="background: #9B59B6"></div>
                <div class="layer-name">åœ°é“ç«™ Metro</div>
            </div>
            <div class="layer-item active" data-layer="floods">
                <div class="layer-checkbox"></div>
                <div class="layer-color" style="background: #E74C3C"></div>
                <div class="layer-name">å†…æ¶ç‚¹ Flood Reports</div>
            </div>
        </div>
        
        <!-- Filter Panel -->
        <div class="filter-panel">
            <div class="filter-title">ç­›é€‰å†…æ¶ä¸ŠæŠ¥ / Filter Reports</div>
            <div class="filter-row">
                <input type="date" class="filter-input" id="filterDateFrom" placeholder="From">
                <input type="date" class="filter-input" id="filterDateTo" placeholder="To">
            </div>
            <div class="filter-chips">
                <div class="filter-chip active" data-depth="all">å…¨éƒ¨ All</div>
                <div class="filter-chip" data-depth="shallow">æµ… &lt;10cm</div>
                <div class="filter-chip" data-depth="moderate">ä¸­ 10-30cm</div>
                <div class="filter-chip" data-depth="deep">æ·± 30-50cm</div>
                <div class="filter-chip" data-depth="severe">ä¸¥é‡ &gt;50cm</div>
            </div>
        </div>
        
        <!-- Language Toggle -->
        <div class="lang-toggle">
            <button class="lang-btn active" data-lang="zh">ä¸­æ–‡</button>
            <button class="lang-btn" data-lang="en">EN</button>
        </div>
        
        <!-- Side Panel -->
        <div class="side-panel">
            <div class="panel-header">
                <div class="panel-title">ä¸ŠæŠ¥å†…æ¶äº‹ä»¶</div>
                <div class="panel-subtitle">Report Inundation Event</div>
            </div>
            
            <div class="panel-content">
                <!-- Mode Selector -->
                <div class="mode-selector">
                    <button class="mode-btn active" data-mode="report">
                        <div class="mode-icon">ğŸŒŠ</div>
                        <div>ä¸ŠæŠ¥å†…æ¶<br><small>Report Flood</small></div>
                    </button>
                    <button class="mode-btn" data-mode="view">
                        <div class="mode-icon">ğŸ“‹</div>
                        <div>æŸ¥çœ‹è®°å½•<br><small>View Reports</small></div>
                    </button>
                </div>
                
                <!-- Report Form -->
                <form id="reportForm">
                    <!-- Location -->
                    <div class="form-section">
                        <label class="form-label">ä½ç½® Location (ç‚¹å‡»åœ°å›¾é€‰æ‹© / Click map)</label>
                        <div class="location-display" id="locationDisplay">
                            <div class="location-icon">ğŸ“</div>
                            <div class="location-placeholder">è¯·åœ¨åœ°å›¾ä¸Šç‚¹å‡»é€‰æ‹©ä½ç½®<br>Click on the map to select location</div>
                        </div>
                    </div>
                    
                    <!-- Date and Time -->
                    <div class="form-row">
                        <div class="form-section">
                            <label class="form-label">æ—¥æœŸ Date</label>
                            <input type="date" class="form-input" id="eventDate" required>
                        </div>
                        <div class="form-section">
                            <label class="form-label">æ—¶é—´ Time</label>
                            <input type="time" class="form-input" id="eventTime" required>
                        </div>
                    </div>
                    
                    <!-- Depth -->
                    <div class="form-section">
                        <label class="form-label">ç§¯æ°´æ·±åº¦ Water Depth</label>
                        <div class="depth-options">
                            <div class="depth-option" data-depth="shallow">
                                <div class="depth-value">&lt;10cm</div>
                                <div class="depth-label">æµ… Shallow</div>
                            </div>
                            <div class="depth-option" data-depth="moderate">
                                <div class="depth-value">10-30cm</div>
                                <div class="depth-label">ä¸­ Moderate</div>
                            </div>
                            <div class="depth-option" data-depth="deep">
                                <div class="depth-value">30-50cm</div>
                                <div class="depth-label">æ·± Deep</div>
                            </div>
                            <div class="depth-option" data-depth="severe">
                                <div class="depth-value">&gt;50cm</div>
                                <div class="depth-label">ä¸¥é‡ Severe</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Situation Type -->
                    <div class="form-section">
                        <label class="form-label">æƒ…å†µç±»å‹ Situation Type</label>
                        <div class="situation-options">
                            <div class="situation-chip" data-situation="home">å®¶é™„è¿‘ Near Home</div>
                            <div class="situation-chip" data-situation="commute">é€šå‹¤è·¯ä¸Š Commuting</div>
                            <div class="situation-chip" data-situation="work">å·¥ä½œåœ°ç‚¹ Workplace</div>
                            <div class="situation-chip" data-situation="other">å…¶ä»– Other</div>
                        </div>
                    </div>
                    
                    <!-- Location Description -->
                    <div class="form-section">
                        <label class="form-label">è¯¦ç»†ä½ç½®æè¿° Location Details</label>
                        <textarea class="form-textarea" id="locationDesc" placeholder="å¦‚ï¼šXXè·¯ä¸XXè·¯äº¤å‰å£ / e.g., Intersection of XX Road and XX Street"></textarea>
                    </div>
                    
                    <!-- Photo Upload -->
                    <div class="form-section">
                        <label class="form-label">ä¸Šä¼ ç…§ç‰‡ Upload Photo (å¯é€‰ Optional)</label>
                        <div class="photo-upload" id="photoUpload">
                            <div class="photo-upload-icon">ğŸ“·</div>
                            <div class="photo-upload-text">ç‚¹å‡»æˆ–æ‹–æ‹½ä¸Šä¼ ç…§ç‰‡<br>Click or drag to upload</div>
                        </div>
                        <input type="file" id="photoInput" accept="image/*">
                    </div>
                    
                    <button type="submit" class="submit-btn" id="submitBtn" disabled>
                        æäº¤ä¸ŠæŠ¥ Submit Report
                    </button>
                </form>
                
                <!-- Report List (hidden by default) -->
                <div class="report-list" id="reportList" style="display: none;">
                    <div class="report-list-title">å†å²ä¸ŠæŠ¥è®°å½• / Report History</div>
                    <div id="reportItems"></div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Instructions Overlay -->
    <div class="instructions-overlay" id="instructions">
        <div class="instructions-icon">ğŸ‘†</div>
        <div class="instructions-text">ç‚¹å‡»åœ°å›¾é€‰æ‹©å†…æ¶ä½ç½® / Click on the map to select flood location</div>
        <button class="instructions-close" id="closeInstructions">Ã—</button>
    </div>
    
    <!-- Toast -->
    <div class="toast" id="toast">
        <span>âœ“</span>
        <span>ä¸ŠæŠ¥æˆåŠŸï¼Thank you for your report!</span>
    </div>
    
    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    
    <!-- Application JS -->
    <script src="app.js"></script>
</body>
</html>
